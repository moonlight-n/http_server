# Правила использования и ограничения
Плагины являются динамическими библиотеками, и подключаются к основному коду сервера без его перекомпиляции. В связи с этим, требуется строгое соблюдение интерфейса и правил именования, расположения плагинов и ресурсов.

### Расположение
- Чтобы всё работало корректно, html-страницы, имеющие логику, должны распологаться в каталоге **pages**
- Файлы библиотек должны находиться в каталоге **plugins**
- Прочие файлы(простой html, картинки и css) должны быть в **resources**

### Именование плагинов
Плагины именуются в соответствии с предполагаемой строкой запроса. В имени файла плагина должен быть префикс **plugin_**, после него идёт строка запроса, причём все символы '/' в нём заменены на '\_' во избежание конфликтов с файловой системой.
К примеру, плагин на запрос "/firstpage/about" будет выглядеть так: "plugin__firstpage_about.so"

### Интерфейс и именование методов плагина
Функции в плагине должны называться таким образом: сначала идёт название страницы(запроса), через '\_' название метода HTTP. Символы '/' всё так-же заменены на '\_'.
Интерфейс должен соответствовать такому виду: 
```
http_response *название_метод(http_request *request);
```

К примеру, прототип функции плагина "plugin__firstpage_about.so" для обработки метода GET будет выглядеть так:

```
http_response *_firstpage_GET(http_request *request);
```

### Компиляция
Веб-сервер должен иметь поддержку динамических библиотек. Компилируется так:
```
gcc *.c -o web-server -ldl
```

Библиотеки:
```
gcc --shared -o названиеБиблиотеки.so названиеИсходногоКода.c read_file_to_buf.c 
```
Если в библиотеке обрабатывается POST-запрос, нужно добавить ещё один файл:
```
gcc --shared -o названиеБиблиотеки.so названиеИсходногоКода.c read_file_to_buf.c parse_post.c
```
